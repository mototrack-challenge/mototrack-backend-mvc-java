<!DOCTYPE html>
<html lang="pt-br" xmlns:th="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>MotoTrack - Lista de Motos</title>
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <link rel="stylesheet" th:href="@{/css/cabecalho-rodape.css}" />
    <link rel="stylesheet" th:href="@{/css/lista-motos.css}" />
  </head>
  <body>
    <header class="cabecalho">
      <div class="logo">
        <img th:src="@{/img/logo-azul.png}" alt="logo" />
        <h1>MotoTrack</h1>
      </div>

      <div class="logo_botao">
        <button>Logout</button>
      </div>
    </header>

    <main class="container_main">
      <section class="resumo_cards">
        <div class="card card_cadastradas">
          <i class="fas fa-motorcycle"></i>
          <h2>12</h2>
          <p>Cadastradas</p>
        </div>

        <div class="card card_analise">
          <i class="fas fa-search"></i>
          <h2>5</h2>
          <p>Em Análise</p>
        </div>

        <div class="card card_manutencao">
          <i class="fas fa-tools"></i>
          <h2>3</h2>
          <p>Em Manutenção</p>
        </div>

        <div class="card card_prontas">
          <i class="fas fa-check-circle"></i>
          <h2>10</h2>
          <p>Prontas para Uso</p>
        </div>
      </section>

      <section class="filtros">
        <div class="filtros_titulo">
          <i class="fas fa-filter"></i>
          <h3>Filtros de Busca</h3>
        </div>

        <div class="filtros_inputs">
          <div class="input-group">
            <label for="placa">Placa</label>
            <input type="text" id="placa" placeholder="Ex: ABC1234" />
          </div>

          <div class="input-group">
            <label for="chassi">Chassi</label>
            <input type="text" id="chassi" placeholder="Número do chassi" />
          </div>

          <div class="input-group">
            <label for="modelo">Modelo</label>
            <select id="modelo">
              <option value="">Selecione um modelo</option>
              <option value="mottu-e">Mottu-E</option>
              <option value="honda-150">Honda CG 150</option>
              <option value="yamaha-250">Yamaha Factor 250</option>
            </select>
          </div>

          <div class="input-group">
            <label for="departamento">Departamento</label>
            <select id="departamento">
              <option value="">Selecione um departamento</option>
              <option value="transporte">Transporte</option>
              <option value="vendas">Vendas</option>
              <option value="administrativo">Administrativo</option>
            </select>
          </div>

          <div class="input-group">
            <label for="status">Status</label>
            <select id="status">
              <option value="">Selecione um status</option>
              <option value="disponivel">Disponível</option>
              <option value="analise">Em análise</option>
              <option value="manutencao">Em manutenção</option>
            </select>
          </div>
        </div>

        <div class="filtros_botoes">
          <button class="botao_filtar">
            <i class="fas fa-filter"></i> Aplicar filtros
          </button>
          <button class="botao_limpar_filtro">
            <i class="fas fa-broom"></i> Limpar filtros
          </button>
        </div>
      </section>

      <section class="secao_lista_motos">
        <div class="lista_motos_header">
          <h2>Motos Cadastradas</h2>
          <a href="cadastro-moto.html" class="btn_criar_moto"
            ><i class="fas fa-plus"></i> Cadastrar Moto</a
          >
        </div>

        <div class="lista_motos">

          <div class="moto_card" th:each="moto : ${motos}">
          <span class="status_badge"
                th:classappend="${moto.status.name() == 'AVALIACAO' ? 'status-em_analise' :
                       moto.status.name() == 'MANUTENCAO' ? 'status-em_manutencao' :
                       moto.status.name() == 'PRONTA_PARA_USO' ? 'status-disponivel' : ''}"
                th:text="${moto.status.name() == 'AVALIACAO' ? 'Análise' :
                moto.status.name() == 'MANUTENCAO' ? 'Manutenção' :
                moto.status.name() == 'PRONTA_PARA_USO' ? 'Disponível' : moto.status.name()}">
          </span>

            <div class="moto_card_cabecalho">
              <h3 th:text="${moto.modelo.name() == 'MOTTU_POP' ? 'Mottu-Pop' :
                        moto.modelo.name() == 'MOTTU_SPORT' ? 'Mottu-Sport' :
                        moto.modelo.name() == 'MOTTU_E' ? 'Mottu-E' : 'Outro'}">
                Modelo
              </h3>
              <div class="imagem_container">
                <img th:src="${moto.modelo.name() == 'MOTTU_POP' ? '/img/mottu-pop.png' :
                   moto.modelo.name() == 'MOTTU_SPORT' ? '/img/mottu-sport.png' :
                   moto.modelo.name() == 'MOTTU_E' ? '/img/mottu-e.png' : '/img/mottu-e.png'}"
                     th:alt="${moto.modelo.name()}"/>
              </div>
            </div>

            <div class="info">
              <p><strong>Placa:</strong> <span th:text="${moto.placa}">Placa</span></p>
              <p><strong>Chassi:</strong> <span th:text="${moto.chassi}">Chassi</span></p>
              <p><strong>Departamento Atual:</strong>
                <span th:text="${moto.movimentacoes.size() > 0 ? moto.movimentacoes.get(0).departamento.descricao : 'Sem movimentações'}"></span>
              </p>
            </div>

            <div class="movimentacoes">
              <p><strong>Últimas Movimentações:</strong></p>
              <ul>
                <li th:each="mov : ${moto.movimentacoes}"
                    th:text="${mov.departamento != null ? mov.departamento.descricao + ' - ' + #temporals.format(mov.dataMovimentacao, 'dd/MM/yyyy') : #temporals.format(mov.dataMovimentacao, 'dd/MM/yyyy')}">
                  Movimentação
                </li>
              </ul>
            </div>

            <div class="alertas">
              <p><strong>Alertas:</strong></p>
              <ul>
                <li th:each="alerta : ${moto.alertas}"
                    th:text="${alerta.mensagem != null ? alerta.mensagem + ' - ' + #temporals.format(alerta.dataAlerta, 'dd/MM/yyyy') : #temporals.format(alerta.dataAlerta, 'dd/MM/yyyy')}">
                  Alertas
                </li>
              </ul>
            </div>

            <div class="botoes_card_moto">
              <a href="#" class="btn_card_moto btn_editar_moto">
                <i class="fas fa-edit"></i> Editar
              </a>
              <a href="movimentacoes.html" class="btn_card_moto btn_movimentacoes">
                <i class="fas fa-exchange-alt"></i> Movimentações
              </a>
              <a href="alertas.html" class="btn_card_moto btn_alertas">
                <i class="fas fa-bell"></i> Alertas
              </a>
              <a href="#" class="btn_card_moto btn_deletar_moto">
                <i class="fas fa-trash"></i> Deletar
              </a>
            </div>
          </div>

        </div>
      </section>
    </main>

    <footer class="rodape">
      <p>&copy; 2025 — MotoTrack</p>
    </footer>
  </body>
</html>
